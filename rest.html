<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>غرفة الراحة</title>
<meta name="theme-color" content="#0b1226">
<style>
:root{
  --bg:#0b1226;
  --panel:rgba(0,0,0,.45);
  --line:rgba(255,255,255,.12);
  --gold:rgba(255,215,0,.7);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Tahoma, Arial;
  color:#fff;
  min-height:100vh;
  background:
    radial-gradient(1200px 600px at 20% 10%, rgba(255,215,0,.08), transparent 60%),
    radial-gradient(900px 500px at 80% 0%, rgba(255,255,255,.06), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.65)),
    url('mosque.jpg');
  background-size: cover;
  background-position: center;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 64px 14px 24px;
}
.top-ticker{
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: min(720px, calc(100% - 28px));
  background: rgba(0,0,0,.25);
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 999px;
  padding: 10px 14px;
  text-align:center;
  font-weight:700;
  letter-spacing:.2px;
  opacity:.95;
}
.wrap{
  width: min(760px, 100%);
}
.card{
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 20px 50px rgba(0,0,0,.35);
}
h1{
  margin: 0 0 6px;
  font-size: 26px;
}
.sub{
  margin: 0 0 14px;
  opacity: .85;
}
.grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width:700px){ .grid{grid-template-columns:1fr;} }
label{display:block; font-weight:700; margin: 6px 0 6px;}
select, input[type="range"]{
  width: 100%;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25);
  color:#fff;
  outline:none;
}
.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  margin-top: 12px;
}
.btn{
  border: 1px solid rgba(255,215,0,.35);
  background: rgba(255,215,0,.12);
  color:#fff;
  padding: 12px 14px;
  border-radius: 12px;
  font-weight:800;
  cursor:pointer;
}
.btn.secondary{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  font-weight:700;
}
.btn:active{transform: translateY(1px);}
.note{
  margin-top: 12px;
  border-top: 1px dashed rgba(255,255,255,.18);
  padding-top: 10px;
  opacity: .85;
  font-size: 13px;
}
.small{
  font-size: 13px;
  opacity: .8;
}
.player{
  margin-top: 12px;
  border-top: 1px solid rgba(255,255,255,.10);
  padding-top: 12px;
}
.time{
  display:flex;
  justify-content:space-between;
  font-variant-numeric: tabular-nums;
  margin-top: 8px;
  opacity: .85;
}
a.back{
  display:inline-block;
  margin-top: 14px;
  text-decoration:none;
  color:#fff;
  opacity:.9;
}
a.back:hover{opacity:1;}
</style>
</head>
<body>
  <div class="top-ticker" id="ticker">راحة بال</div>

  <div class="wrap">
    <div class="card">
      <h1>غرفة الراحة</h1>
      <p class="sub">مكان هادئ… اختر القارئ والسورة واستمع براحة.</p>

      <div class="grid">
        <div>
          <label for="reciter">القارئ</label>
          <select id="reciter"></select>
        </div>
        <div>
          <label for="surah">السورة</label>
          <select id="surah"></select>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="playBtn">تشغيل</button>
        <button class="btn secondary" id="stopBtn">إيقاف</button>

        <div style="flex:1; min-width:180px;">
          <label class="small" for="vol">الصوت</label>
          <input id="vol" type="range" min="0" max="1" step="0.01" value="0.35">
        </div>
      </div>

      <div class="player">
        <audio id="audio" preload="none" controls style="width:100%; border-radius:12px;"></audio>
        <div class="time">
          <span id="now">—</span>
          <span class="small">﴿ أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ ﴾</span>
        </div>
        <div class="note">
          ملاحظة: الصوت لا يعمل تلقائيًا احترامًا… اضغط تشغيل عندما تكون مستعدًا.
        </div>
      </div>

      <a class="back" href="index.html">⬅️ الرجوع بهدوء</a>
    </div>
  </div>

<script>
const RECITERS = [
{name:"ياسر الدوسري", base:"https://server11.mp3quran.net/download/yasser/"},
{name:"مشاري العفاسي", base:"https://server8.mp3quran.net/download/afs/"},
{name:"عبدالرحمن السديس", base:"https://server11.mp3quran.net/download/sds/"},
{name:"ماهر المعيقلي", base:"https://server12.mp3quran.net/download/maher/Almusshaf-Al-Mo-lim/"}
];

const SURAHS = [
"الفاتحة",
"البقرة",
"آل عمران",
"النساء",
"المائدة",
"الأنعام",
"الأعراف",
"الأنفال",
"التوبة",
"يونس",
"هود",
"يوسف",
"الرعد",
"إبراهيم",
"الحجر",
"النحل",
"الإسراء",
"الكهف",
"مريم",
"طه",
"الأنبياء",
"الحج",
"المؤمنون",
"النور",
"الفرقان",
"الشعراء",
"النمل",
"القصص",
"العنكبوت",
"الروم",
"لقمان",
"السجدة",
"الأحزاب",
"سبأ",
"فاطر",
"يس",
"الصافات",
"ص",
"الزمر",
"غافر",
"فصلت",
"الشورى",
"الزخرف",
"الدخان",
"الجاثية",
"الأحقاف",
"محمد",
"الفتح",
"الحجرات",
"ق",
"الذاريات",
"الطور",
"النجم",
"القمر",
"الرحمن",
"الواقعة",
"الحديد",
"المجادلة",
"الحشر",
"الممتحنة",
"الصف",
"الجمعة",
"المنافقون",
"التغابن",
"الطلاق",
"التحريم",
"الملك",
"القلم",
"الحاقة",
"المعارج",
"نوح",
"الجن",
"المزمل",
"المدثر",
"القيامة",
"الإنسان",
"المرسلات",
"النبأ",
"النازعات",
"عبس",
"التكوير",
"الانفطار",
"المطففين",
"الانشقاق",
"البروج",
"الطارق",
"الأعلى",
"الغاشية",
"الفجر",
"البلد",
"الشمس",
"الليل",
"الضحى",
"الشرح",
"التين",
"العلق",
"القدر",
"البينة",
"الزلزلة",
"العاديات",
"القارعة",
"التكاثر",
"العصر",
"الهمزة",
"الفيل",
"قريش",
"الماعون",
"الكوثر",
"الكافرون",
"النصر",
"المسد",
"الإخلاص",
"الفلق",
"الناس"
];

const PHRASES = [
"ثقة بلا ضجيج",
"أمانك أولاً",
"الأسرع في التنفيذ",
"خدمات واضحة وسهلة",
"راحة بال لعملائك",
"نظام دقيق ومحكم",
"نستقبلكم بكل احترام",
"شبكتنا حول العالم",
"الحوالة بأمان تام",
"AL‑DOLLAR OFFICE"
];

function pad3(n){ return String(n).padStart(3,'0'); }

const recSel = document.getElementById('reciter');
const surSel = document.getElementById('surah');
const audio = document.getElementById('audio');
const playBtn = document.getElementById('playBtn');
const stopBtn = document.getElementById('stopBtn');
const vol = document.getElementById('vol');
const now = document.getElementById('now');
const ticker = document.getElementById('ticker');

// Fill reciters
RECITERS.forEach((r, i) => {
  const opt = document.createElement('option');
  opt.value = i;
  opt.textContent = r.name;
  recSel.appendChild(opt);
});

// Fill surahs
SURAHS.forEach((name, idx) => {
  const n = idx + 1;
  const opt = document.createElement('option');
  opt.value = n;
  opt.textContent = `${String(n).padStart(3,'0')} - ${name}`;
  surSel.appendChild(opt);
});

function buildUrl() {
  const r = RECITERS[Number(recSel.value)];
  const s = Number(surSel.value);
  return r.base + pad3(s) + '.mp3';
}

function updateNow() {
  const d = new Date();
  now.textContent = d.toLocaleString('ar-EG', { hour12:false });
}
setInterval(updateNow, 1000); updateNow();

function tickPhrase() {
  const i = Math.floor(Math.random()*PHRASES.length);
  ticker.textContent = PHRASES[i];
}
tickPhrase();
setInterval(tickPhrase, 5000);
document.addEventListener('click', () => tickPhrase(), {passive:true});
document.addEventListener('scroll', () => tickPhrase(), {passive:true});

vol.addEventListener('input', () => {
  audio.volume = Number(vol.value);
});
audio.volume = Number(vol.value);

playBtn.addEventListener('click', async () => {
  const url = buildUrl();
  audio.src = url;
  try {
    await audio.play();
  } catch(e) {
    // User gesture required - already a click, but keep safe
    console.log(e);
  }
});

stopBtn.addEventListener('click', () => {
  audio.pause();
  audio.currentTime = 0;
});

// Change selection: update source but don't autoplay
recSel.addEventListener('change', () => { audio.src = buildUrl(); });
surSel.addEventListener('change', () => { audio.src = buildUrl(); });

// Default to Al-Fatihah
surSel.value = 1;
audio.src = buildUrl();
</script>
</body>
</html>
